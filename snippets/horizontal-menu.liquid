{%- liquid
  assign dropdowns_animation = section_st.dropdowns_animation
-%}
{% if link.links.size > 0 %}
  {%- if type == 'classic' -%}
    <div class="submenu classic pointer-none transition invisible z-5{% if menu_mobile == blank %} {{ dropdowns_animation }} absolute submenu-desktop{% else %} bg-white sub-mb absolute inset-0 drawer drawer-right-mb overflow-hidden flex column{% endif %}">
      <div class="menu-container py-1025-30 bg-white custom-scrollbar overflow-auto">
        {%- if menu_mobile != blank -%}
          <div class="submenu-header heading-color flex align-center space-between px-gutter-x py-20 border-bottom sticky top-0 bg-white z-3 mb-10">
            <div class="back-menu flex align-center gap-custom pointer" style="--gap: 24">
              <button
                class="pointer btn-reset flex align-center gap-25 heading-color"
                aria-label="{{ link.title }}"
              >
                <svg class="icon-back min-w-custom" width="8" height="14" viewBox="0 0 8 14" fill="none">
                  <use href="#icon-back" />
                </svg>
                <span class="fs-18 menu_weight">{{- link.title -}}</span>
              </button>
            </div>
            <button
              class="modal__close btn-close-menu top-10 right-10 btn-reset rounded-50 inline-flex content-center pointer heading-color"
              style="--width: 2.4rem;"
              aria-label="{{ 'accessibility.button.close' | t }}"
              is="button-close-model"
            >
              <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                <use href="#icon-close" />
              </svg>
            </button>
          </div>
        {%- endif -%}
  {%- else -%}
    {%- if menu_mobile != blank -%}
      <div class="submenu-header heading-color flex align-center space-between px-gutter-x py-20 border-bottom sticky top-0 bg-white z-3 mb-10">
        <div class="back-menu flex align-center gap-custom pointer" style="--gap: 24">
          <button
            class="pointer btn-reset flex align-center gap-25 heading-color"
            aria-label="{{ link.title }}"
          >
            <svg class="icon-back min-w-custom" width="8" height="14" viewBox="0 0 8 14" fill="none">
              <use href="#icon-back" />
            </svg>
            <span class="fs-18 menu_weight">{{- link.title -}}</span>
          </button>
        </div>
        <button
          class="modal__close btn-close-menu top-10 right-10 btn-reset rounded-50 inline-flex content-center pointer heading-color"
          style="--width: 2.4rem;"
          aria-label="{{ 'accessibility.button.close' | t }}"
          is="button-close-model"
        >
          <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
            <use href="#icon-close" />
          </svg>
        </button>
      </div>
    {%- endif -%}
  {%- endif -%}
  <ul class="menu list-unstyled{% if type != 'classic' and menu_mobile == blank %} sub-menu-mega flex wrap flex-cols gap row-gap-30{% elsif menu_mobile != blank %} px-gutter-x py-12{% endif %}">
    {% for child_link in link.links %}
      <li class="menu-link{% if child_link.links.size > 0 %} have-child{% if menu_mega == blank %} relative{% endif %}{% else %} py-6{% endif %}{% if menu_mega == blank and menu_mobile == blank %} px-20{% endif %}">
        {%- if child_link.links.size > 0 -%}
          {% if menu_mega != blank %}
            <a
              class="menu__item level-2 heading-style h6 border-animation relative"
              href="{{ link.url }}"
              aria-label="{{ grandchild_link.title }}"
            >
              {{- child_link.title -}}
            </a>
          {%- else -%}
            <details
              class="details-normal"
              is="submenu-details"
              {% if type != 'classic' and menu_mobile == blank %}
                open
              {%- elsif menu_mobile != blank -%}
                open
              {% endif %}
            >
              <summary
                class="menu__item level-2{% if type != 'classic' %} fs-18 heading-style{% endif %}{% if menu_mobile != blank %} fs-18 heading-style py-10{% else %} py-6{% endif %} flex align-center gap-5 space-between inside-out-hover"
                aria-label="{{ child_link.title }}"
              >
                <span class="menu__title border-animation relative">
                  {{- child_link.title -}}
                </span>
                <span
                  class="toggle-menu w-30 h-custom inline-flex flex-end align-center"
                  style="--height: 30px;"
                >
                  <svg class="icon icon-down icon-rotate transition-short" width="9" height="6" viewBox="0 0 9 6">
                    <use href="#icon-arrow-down" />
                  </svg>
                </span>
              </summary>
            </details>
          {% endif %}
          <ul class="sub-children-menu list-unstyled overflow-hidden-mb{% if menu_mega == blank and menu_mobile == blank %} overflow-hidden{% endif %}{% if menu_mega != blank and menu_mobile == blank %} mt-1025-20{% endif %}">
            {% for grandchild_link in child_link.links %}
              <li class="menu-link py-6{% if menu_mega == blank and menu_mobile == blank %} px-10{% endif %}">
                <a
                  class="menu__item level-3 border-animation relative"
                  href="{{ grandchild_link.url }}"
                  aria-label="{{ grandchild_link.title }}"
                >
                  {{- grandchild_link.title -}}
                </a>
              </li>
            {% endfor %}
          </ul>
        {%- else -%}
          <a
            class="menu__item level-2{% if type != 'classic' %} fs-18 heading-style{% endif %}{% if menu_mobile != blank %} fs-18 heading-style{% endif %} border-animation relative{% if menu_mega != blank %} heading-style h6{% endif %}"
            aria-label="{{ child_link.title }}"
            href="{{ child_link.url }}"
          >
            {{- child_link.title -}}
          </a>
        {%- endif -%}
      </li>
    {% endfor %}
  </ul>
  {%- if type == 'classic' -%}
    </div>
    </div>
  {%- endif -%}
{%- else -%}
  {%- if menu_mobile != blank -%}
    <div class="submenu-header heading-color flex align-center space-between px-gutter-x py-20 border-bottom sticky top-0 bg-white z-3 mb-10">
      <div class="back-menu flex align-center gap-custom pointer" style="--gap: 24">
        <button
          class="pointer btn-reset flex align-center gap-25 heading-color"
          aria-label="{{ link.title }}"
        >
          <svg class="icon-back min-w-custom" width="8" height="14" viewBox="0 0 8 14" fill="none">
            <use href="#icon-back" />
          </svg>
          <span class="fs-18 menu_weight">{{- link.title -}}</span>
        </button>
      </div>
      <button
        class="modal__close btn-close-menu top-10 right-10 btn-reset rounded-50 inline-flex content-center pointer heading-color"
        style="--width: 2.4rem;"
        aria-label="{{ 'accessibility.button.close' | t }}"
        is="button-close-model"
      >
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
          <use href="#icon-close" />
        </svg>
      </button>
    </div>
  {%- endif -%}
{% endif %}
