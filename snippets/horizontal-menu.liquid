{% if link.links.size > 0 %}
  {%- if type == 'classic' -%}
    <div
      class="submenu classic transition invisible bg-white z-1 transition{% if menu_mobile == blank %} py-30 absolute submenu-desktop {{ section_st.dropdowns_animation }} shadow{% else %} sub-mb absolute inset-0 drawer drawer-right{% endif %}"
    >
      {%- if menu_mobile != blank -%}
        <div class="submenu-header">
          <back-button tabindex="0" class="flex gap-5 align-center px-20 py-5">
            <svg class="icon-back min-w-custom" width="6" height="11" viewBox="0 0 6 11" fill="none">
              <use href="#icon-back" />
            </svg>
            {{- link.title -}}
          </back-button>
        </div>
      {%- endif -%}
  {%- else -%}
    {%- if menu_mobile != blank -%}
      <div class="submenu-header">
        <back-button tabindex="0" class="flex gap-5 align-center px-20 py-5">
          <svg class="icon-back min-w-custom" width="6" height="11" viewBox="0 0 6 11" fill="none">
            <use href="#icon-back" />
          </svg>
          {{- link.title -}}
        </back-button>
      </div>
    {%- endif -%}
  {%- endif -%}
  <ul
    class="menu list-unstyled{% if type != 'classic' and menu_mobile == blank %} sub-menu-mega flex wrap flex-cols gap row-gap-30{% endif %}"
  >
    {% for child_link in link.links %}
      <li class="menu-link{% if child_link.links.size > 0 %} have-child{% if menu_mega == blank %} relative{% endif %}{% endif %}{% if menu_mega == blank and menu_mobile == blank %} px-20{% endif %}">
        {%- if child_link.links.size > 0 -%}
          {% if menu_mega != blank %}
            <a
              class="menu__item py-5 heading-style inside-out-effect relative"
              href="{{ link.url }}"
              aria-label="{{ grandchild_link.title }}"
            >
              {{- child_link.title -}}
          {%- else -%}
            <details open>
              <summary
                class="menu__item py-5 flex align-center gap-5 justify-between inside-out-hover"
                data-href="{{ link.url }}"
                aria-label="{{ child_link.title }}"
              >
                <span class="inside-out-effect relative">
                  {{- child_link.title -}}
                </span>
                {% if menu_mobile == blank %}
                  {% if settings.rtl %}
                    <svg class="icon-down block hidden-1025" width="6" height="11">
                      <use href="#icon-back" />
                    </svg>
                  {% else %}
                    <svg class="icon-down block hidden-1025" width="6" height="11">
                      <use href="#icon-next" />
                    </svg>
                  {% endif %}
                {% else %}
                  <svg class="icon icon-down transition-short" width="9" height="6" viewBox="0 0 9 6">
                    <use href="#icon-arrow-down" />
                  </svg>
                {% endif %}
              </summary>
          {% endif %}
          <ul class="sub-children-menu list-unstyled{% if menu_mega == blank and menu_mobile == blank %} classic transition invisible py-20 absolute z-1 top-0 left-100 bg-white shadow{% endif %}">
            {% for grandchild_link in child_link.links %}
              <li class="menu-link{% if menu_mega == blank and menu_mobile == blank %} px-20{% endif %}">
                <a
                  class="menu__item py-5 inside-out-effect relative"
                  href="{{ grandchild_link.url }}"
                  aria-label="{{ grandchild_link.title }}"
                >
                  {{- grandchild_link.title -}}
                </a>
              </li>
            {% endfor %}
          </ul>
          {% if menu_mega != blank %}
            </a>
          {%- else -%}
            </details>
          {% endif %}

        {%- else -%}
          <a
            class="menu__item py-5 inside-out-effect relative{% if menu_mega != blank %} heading-style{% endif %}"
            aria-label="{{ child_link.title }}"
            href="{{ child_link.url }}"
          >
            {{- child_link.title -}}
          </a>
        {%- endif -%}
      </li>
    {% endfor %}
  </ul>
  {%- if type == 'classic' -%}
    </div>
  {%- endif -%}
{%- else -%}
  {%- if menu_mobile != blank -%}
    <div class="submenu-header">
      <back-button tabindex="0" class="flex gap-5 align-center px-20 py-5">
        <svg class="icon-back min-w-custom" width="6" height="11" viewBox="0 0 6 11" fill="none">
          <use href="#icon-back" />
        </svg>
        {{- link.title -}}
      </back-button>
    </div>
  {%- endif -%}
{% endif %}
