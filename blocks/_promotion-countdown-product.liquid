{%- if closest.product != blank and closest.product.metafields.custom.promotion_countdown -%}
  <script src="{{ 'countdown-timer.js' | asset_url }}" defer="defer"></script>
  {%- liquid
    assign heading = block.settings.heading
    assign description = block.settings.description
  -%}
  {% style %}
    @media (min-width: 768px) {
      .countdown_timer-product countdown-timer {
        --font-size: 22;
        --min-width: 6.5rem;
      }
    }
  {% endstyle %}
  <div
    class="countdown_timer-product p-20 border-dashed text-center bg-sale rounded border-dashed mb-custom"
    style="--opacity: 0.06;--color-border: rgb(var(--sale-bg-rgb));--bg-color-custom: rgb(var(--sale-bg-rgb));--font-size: 2rem;--padding: 1.4rem 1rem;--min-width: 6rem;"
  >
    {% if heading or description %}
      <div class="promotion_countdown mb-20 sale-color">
        {% if heading %}
          <div class="heading h6 sale-color">{{ block.settings.heading }}</div>
        {% endif %}
        {% if description %}
          <div class="description sale-color">{{ block.settings.description }}</div>
        {% endif %}
      </div>
    {% endif %}
    <countdown-timer
      class="flex justify-center wrap gap-10"
      data-deadline="{{ product.metafields.custom.promotion_countdown }}"
      data-days="{{ 'sections.countdown.format.days' | t }}"
      data-hours="{{ 'sections.countdown.format.hours' | t }}"
      data-mins="{{ 'sections.countdown.format.mins' | t }}"
      data-secs="{{ 'sections.countdown.format.secs' | t }}"
    >
      <div class="countdown-container lh-normal flex relative content-center">
        <span class="days_timer countdown-item">00</span>
        <span class="timer-announcementbar-text">{{ 'sections.countdown.format.days' | t }}</span>
      </div>
      <div class="countdown-container lh-normal flex relative content-center">
        <span class="hours_timer countdown-item">00</span>
        <span class="timer-announcementbar-text">{{ 'sections.countdown.format.hours' | t }}</span>
      </div>
      <div class="countdown-container lh-normal flex relative content-center">
        <span class="minutes_timer countdown-item">00</span>
        <span class="timer-announcementbar-text">{{ 'sections.countdown.format.mins' | t }}</span>
      </div>
      <div class="countdown-container lh-normal flex relative content-center">
        <span class="seconds_timer countdown-item">00</span>
        <span class="timer-announcementbar-text">{{ 'sections.countdown.format.secs' | t }}</span>
      </div>
    </countdown-timer>
  </div>
{%- endif -%}
{% schema %}
{
  "name": "t:sections.all.product_setting.promotion_countdown.name",
  "class": "block-product__promotion-countdown slideIn-animate",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.all.product_setting.promotion_alert.heading.label",
      "default": "Promotion countdown"
    },
    {
      "type": "richtext",
      "id": "description",
      "default": "<p>Promotion countdown description</p>",
      "label": "t:sections.all.product_setting.promotion_alert.description.label"
    }
  ],
  "presets": [{ "name": "t:sections.all.product_setting.promotion_countdown.name" }]
}
{% endschema %}
